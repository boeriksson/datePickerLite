95501291bf757c1d324265027786f1c5
'use strict';

var _jsJoda = require('js-joda');

var _model = require('./model');

describe('#firstWeekDay', function () {
    test('should return a monday in same week if given a thursday', function () {
        var givenDay = _jsJoda.LocalDate.parse('2018-05-11');
        expect((0, _model.firstWeekDay)(givenDay).dayOfWeek().toString()).toBe('MONDAY');
    });
});

describe('#parseWeekFromDay1', function () {
    test('should return an array result of a supplied function', function () {
        var startDate = _jsJoda.LocalDate.parse('2018-05-07');
        var expectedResult = ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY', 'SATURDAY', 'SUNDAY'];
        var result = (0, _model.parseWeekFromDay1)(startDate)(function (date) {
            return date.dayOfWeek().toString();
        });
        expect(result).toEqual(expectedResult);
    });
});

describe('#isSelectable', function () {
    var conf = {};
    beforeEach(function () {
        conf.displayDate = _jsJoda.LocalDate.parse('2018-05-01');
        conf.selectedStartDate = undefined;
        conf.selectedEndDate = undefined;
        conf.allowedStartDate = undefined;
        conf.allowedEndDate = undefined;
    });
    afterEach(function () {
        conf = {};
    });

    test('should be selectable if no allowedRange set', function () {
        expect((0, _model.isSelectable)(_jsJoda.LocalDate.parse('2018-05-11'), conf)).toBe(true);
    });

    test('should be isSelectable = true, if only allowedStartDate is set and date is same', function () {
        var aDate = _jsJoda.LocalDate.parse('2018-05-11');
        conf.allowedStartDate = aDate;
        expect((0, _model.isSelectable)(aDate, conf)).toBe(true);
    });

    test('should be isSelectable = false, if only allowedStartDate is set and date is before', function () {
        var aDate = _jsJoda.LocalDate.parse('2018-05-11');
        conf.allowedStartDate = aDate.plusDays(3);
        expect((0, _model.isSelectable)(aDate, conf)).toBe(false);
    });

    test('should be isSelectable = true, if only allowedStartDate is set and date is after', function () {
        var aDate = _jsJoda.LocalDate.parse('2018-05-11');
        conf.allowedStartDate = aDate.minusDays(3);
        expect((0, _model.isSelectable)(aDate, conf)).toBe(true);
    });

    test('should be isSelectable = true, if only allowedEndDate is set and date is before', function () {
        var aDate = _jsJoda.LocalDate.parse('2018-05-11');
        conf.allowedEndDate = aDate.plusDays(2);
        expect((0, _model.isSelectable)(aDate, conf)).toBe(true);
    });

    test('should be isSelectable = false, if only allowedEndDate is set and date is after', function () {
        var aDate = _jsJoda.LocalDate.parse('2018-05-11');
        conf.allowedEndDate = aDate.minusDays(2);
        expect((0, _model.isSelectable)(aDate, conf)).toBe(false);
    });

    test('should be isSelectable = true, if allowedEndDate & allowedStartDate & date is within', function () {
        var aDate = _jsJoda.LocalDate.parse('2018-05-11');
        conf.allowedEndDate = aDate.plusDays(2);
        conf.allowedStartDate = aDate.minusDays(10);
        expect((0, _model.isSelectable)(aDate, conf)).toBe(true);
    });

    test('should be isSelectable = false, if allowedEndDate & allowedStartDate & date is outside', function () {
        var aDate = _jsJoda.LocalDate.parse('2018-05-11');
        conf.allowedEndDate = aDate.minusDays(2);
        conf.allowedStartDate = aDate.minusDays(10);
        expect((0, _model.isSelectable)(aDate, conf)).toBe(false);
    });
});

describe('#populateMonthDisplay', function () {
    var conf = {};
    beforeEach(function () {
        conf.displayDate = _jsJoda.LocalDate.parse('2018-05-01');
        conf.selectedStartDate = undefined;
        conf.selectedEndDate = undefined;
        conf.allowedStartDate = undefined;
        conf.allowedEndDate = undefined;
    });

    afterEach(function () {
        conf = {};
    });

    test('last entry in first array returned should have property "inMonth: true"', function () {
        expect((0, _model.populateMonthDisplay)(conf)[0][6].inMonth).toBe(true);
    });

    test('entry in allowedRange should have "unselectable: false"', function () {
        conf.allowedStartDate = _jsJoda.LocalDate.parse('2017-05-01');
        conf.allowedEndDate = _jsJoda.LocalDate.parse('2018-05-11');
        expect((0, _model.populateMonthDisplay)(conf)[0][0].unselectable).toBe(false);
    });

    test('entry outside of allowedrange should have "unselectable: true"', function () {
        conf.allowedStartDate = _jsJoda.LocalDate.parse('2017-05-01');
        conf.allowedEndDate = _jsJoda.LocalDate.parse('2017-05-11');
        expect((0, _model.populateMonthDisplay)(conf)[0][0].unselectable).toBe(true);
    });

    describe('selectedRange', function () {
        beforeEach(function () {
            conf.selectedStartDate = _jsJoda.LocalDate.parse('2018-05-01');
            conf.selectedEndDate = _jsJoda.LocalDate.parse('2018-05-11');
        });
        test('entry in selectedrange should have "selected: true"', function () {
            expect((0, _model.populateMonthDisplay)(conf)[1][0].selected).toBe(true);
        });
        test('entry outside selectedrange should have "selected: false"', function () {
            var endOfSelectedRange = (0, _model.populateMonthDisplay)(conf)[1][4];
            expect(endOfSelectedRange.selected).toBe(true);
            expect(endOfSelectedRange.selectedEdge).toBe(true);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZGVsLnRlc3QuanMiXSwibmFtZXMiOlsiZGVzY3JpYmUiLCJ0ZXN0IiwiZ2l2ZW5EYXkiLCJwYXJzZSIsImV4cGVjdCIsImRheU9mV2VlayIsInRvU3RyaW5nIiwidG9CZSIsInN0YXJ0RGF0ZSIsImV4cGVjdGVkUmVzdWx0IiwicmVzdWx0IiwiZGF0ZSIsInRvRXF1YWwiLCJjb25mIiwiYmVmb3JlRWFjaCIsImRpc3BsYXlEYXRlIiwic2VsZWN0ZWRTdGFydERhdGUiLCJ1bmRlZmluZWQiLCJzZWxlY3RlZEVuZERhdGUiLCJhbGxvd2VkU3RhcnREYXRlIiwiYWxsb3dlZEVuZERhdGUiLCJhZnRlckVhY2giLCJhRGF0ZSIsInBsdXNEYXlzIiwibWludXNEYXlzIiwiaW5Nb250aCIsInVuc2VsZWN0YWJsZSIsInNlbGVjdGVkIiwiZW5kT2ZTZWxlY3RlZFJhbmdlIiwic2VsZWN0ZWRFZGdlIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUVBOztBQVFBQSxTQUFTLGVBQVQsRUFBMEIsWUFBTTtBQUM1QkMsU0FBSyx5REFBTCxFQUFnRSxZQUFNO0FBQ2xFLFlBQU1DLFdBQVcsa0JBQVVDLEtBQVYsQ0FBZ0IsWUFBaEIsQ0FBakI7QUFDQUMsZUFBTyx5QkFBYUYsUUFBYixFQUF1QkcsU0FBdkIsR0FBbUNDLFFBQW5DLEVBQVAsRUFBc0RDLElBQXRELENBQTJELFFBQTNEO0FBQ0gsS0FIRDtBQUlILENBTEQ7O0FBT0FQLFNBQVMsb0JBQVQsRUFBK0IsWUFBTTtBQUNqQ0MsU0FBSyxzREFBTCxFQUE2RCxZQUFNO0FBQy9ELFlBQU1PLFlBQVksa0JBQVVMLEtBQVYsQ0FBZ0IsWUFBaEIsQ0FBbEI7QUFDQSxZQUFNTSxpQkFBaUIsQ0FBQyxRQUFELEVBQVUsU0FBVixFQUFvQixXQUFwQixFQUFnQyxVQUFoQyxFQUEyQyxRQUEzQyxFQUFvRCxVQUFwRCxFQUErRCxRQUEvRCxDQUF2QjtBQUNBLFlBQU1DLFNBQVMsOEJBQWtCRixTQUFsQixFQUE2QixVQUFDRyxJQUFE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QixFQUFpQ2EsWUFBeEMsRUFBc0RuQixJQUF0RCxDQUEyRCxLQUEzRDtBQUNILEtBSkQ7O0FBTUFOLFNBQUssZ0VBQUwsRUFBdUUsWUFBTTtBQUN6RVksYUFBS00sZ0JBQUwsR0FBd0Isa0JBQVVoQixLQUFWLENBQWdCLFlBQWhCLENBQXhCO0FBQ0FVLGFBQUtPLGNBQUwsR0FBc0Isa0JBQVVqQixLQUFWLENBQWdCLFlBQWhCLENBQXRCO0FBQ0FDLGVBQU8saUNBQXFCUyxJQUFyQixFQUEyQixDQUEzQixFQUE4QixDQUE5QixFQUFpQ2EsWUFBeEMsRUFBc0RuQixJQUF0RCxDQUEyRCxJQUEzRDtBQUNILEtBSkQ7O0FBTUFQLGFBQVMsZUFBVCxFQUEwQixZQUFNO0FBQzVCYyxtQkFBVyxZQUFNO0FBQ2JELGlCQUFLRyxpQkFBTCxHQUF5QixrQkFBVWIsS0FBVixDQUFnQixZQUFoQixDQUF6QjtBQUNBVSxpQkFBS0ssZUFBTCxHQUF1QixrQkFBVWYsS0FBVixDQUFnQixZQUFoQixDQUF2QjtBQUNILFNBSEQ7QUFJQUYsYUFBSyxxREFBTCxFQUE0RCxZQUFNO0FBQzlERyxtQkFBTyxpQ0FBcUJTLElBQXJCLEVBQTJCLENBQTNCLEVBQThCLENBQTlCLEVBQWlDYyxRQUF4QyxFQUFrRHBCLElBQWxELENBQXVELElBQXZEO0FBQ0gsU0FGRDtBQUdBTixhQUFLLDJEQUFMLEVBQWtFLFlBQU07QUFDcEUsZ0JBQU0yQixxQkFBcUIsaUNBQXFCZixJQUFyQixFQUEyQixDQUEzQixFQUE4QixDQUE5QixDQUEzQjtBQUNBVCxtQkFBT3dCLG1CQUFtQkQsUUFBMUIsRUFBb0NwQixJQUFwQyxDQUF5QyxJQUF6QztBQUNBSCxtQkFBT3dCLG1CQUFtQkMsWUFBMUIsRUFBd0N0QixJQUF4QyxDQUE2QyxJQUE3QztBQUNILFNBSkQ7QUFLSCxLQWJEO0FBY0gsQ0E1Q0QiLCJmaWxlIjoibW9kZWwudGVzdC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IExvY2FsRGF0ZSB9IGZyb20gJ2pzLWpvZGEnXHJcblxyXG5pbXBvcnQge1xyXG4gICAgZmlyc3RXZWVrRGF5LFxyXG4gICAgaXNTZWxlY3RhYmxlLFxyXG4gICAgcGFyc2VXZWVrRnJvbURheTEsXHJcbiAgICBwb3B1bGF0ZU1vbnRoRGlzcGxheVxyXG59IGZyb20gJy4vbW9kZWwnXHJcblxyXG5cclxuZGVzY3JpYmUoJyNmaXJzdFdlZWtEYXknLCAoKSA9PiB7XHJcbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIGEgbW9uZGF5IGluIHNhbWUgd2VlayBpZiBnaXZlbiBhIHRodXJzZGF5JywgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGdpdmVuRGF5ID0gTG9jYWxEYXRlLnBhcnNlKCcyMDE4LTA1LTExJylcclxuICAgICAgICBleHBlY3QoZmlyc3RXZWVrRGF5KGdpdmVuRGF5KS5kYXlPZldlZWsoKS50b1N0cmluZygpKS50b0JlKCdNT05EQVknKVxyXG4gICAgfSlcclxufSlcclxuXHJcbmRlc2NyaWJlKCcjcGFyc2VXZWVrRnJvbURheTEnLCAoKSA9PiB7XHJcbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIGFuIGFycmF5IHJlc3VsdCBvZiBhIHN1cHBsaWVkIGZ1bmN0aW9uJywgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IExvY2FsRGF0ZS5wYXJzZSgnMjAxOC0wNS0wNycpXHJcbiAgICAgICAgY29uc3QgZXhwZWN0ZWRSZXN1bHQgPSBbJ01PTkRBWScsJ1RVRVNEQVknLCdXRURORVNEQVknLCdUSFVSU0RBWScsJ0ZSSURBWScsJ1NBVFVSREFZJywnU1VOREFZJ11cclxuICAgICAgICBjb25zdCByZXN1bHQgPSBwYXJzZVdlZWtGcm9tRGF5MShzdGFydERhdGUpKChkYXRlKSA9PiBkYXRlLmRheU9mV2VlaygpLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChleHBlY3RlZFJlc3VsdClcclxuICAgIH0pXHJcbn0pXHJcblxyXG5kZXNjcmliZSgnI2lzU2VsZWN0YWJsZScsICgpID0+IHtcclxuICAgIGxldCBjb25mID0ge31cclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgIGNvbmYuZGlzcGxheURhdGUgPSBMb2NhbERhdGUucGFyc2UoJzIwMTgtMDUtMDEnKVxyXG4gICAgICAgIGNvbmYuc2VsZWN0ZWRTdGFydERhdGUgPSB1bmRlZmluZWRcclxuICAgICAgICBjb25mLnNlbGVjdGVkRW5kRGF0ZSA9IHVuZGVmaW5lZFxyXG4gICAgICAgIGNvbmYuYWxsb3dlZFN0YXJ0RGF0ZSA9IHVuZGVmaW5lZFxyXG4gICAgICAgIGNvbmYuYWxsb3dlZEVuZERhdGUgPSB1bmRlZmluZWRcclxuICAgIH0pXHJcbiAgICBhZnRlckVhY2goKCkgPT4ge1xyXG4gICAgICAgIGNvbmYgPSB7fVxyXG4gICAgfSlcclxuXHJcbiAgICB0ZXN0KCdzaG91bGQgYmUgc2VsZWN0YWJsZSBpZiBubyBhbGxvd2VkUmFuZ2Ugc2V0JywgKCkgPT4ge1xyXG4gICAgICAgIGV4cGVjdChpc1NlbGVjdGFibGUoTG9jYWxEYXRlLnBhcnNlKCcyMDE4LTA1LTExJyksIGNvbmYpKS50b0JlKHRydWUpXHJcbiAgICB9KVxyXG5cclxuICAgIHRlc3QoJ3Nob3VsZCBiZSBpc1NlbGVjdGFibGUgPSB0cnVlLCBpZiBvbmx5IGFsbG93ZWRTdGFydERhdGUgaXMgc2V0IGFuZCBkYXRlIGlzIHNhbWUnLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYURhdGUgPSBMb2NhbERhdGUucGFyc2UoJzIwMTgtMDUtMTEnKVxyXG4gICAgICAgIGNvbmYuYWxsb3dlZFN0YXJ0RGF0ZSA9IGFEYXRlXHJcbiAgICAgICAgZXhwZWN0KGlzU2VsZWN0YWJsZShhRGF0ZSwgY29uZikpLnRvQmUodHJ1ZSlcclxuICAgIH0pXHJcblxyXG4gICAgdGVzdCgnc2hvdWxkIGJlIGlzU2VsZWN0YWJsZSA9IGZhbHNlLCBpZiBvbmx5IGFsbG93ZWRTdGFydERhdGUgaXMgc2V0IGFuZCBkYXRlIGlzIGJlZm9yZScsICgpID0+IHtcclxuICAgICAgICBjb25zdCBhRGF0ZSA9IExvY2FsRGF0ZS5wYXJzZSgnMjAxOC0wNS0xMScpXHJcbiAgICAgICAgY29uZi5hbGxvd2VkU3RhcnREYXRlID0gYURhdGUucGx1c0RheXMoMylcclxuICAgICAgICBleHBlY3QoaXNTZWxlY3RhYmxlKGFEYXRlLCBjb25mKSkudG9CZShmYWxzZSlcclxuICAgIH0pXHJcblxyXG4gICAgdGVzdCgnc2hvdWxkIGJlIGlzU2VsZWN0YWJsZSA9IHRydWUsIGlmIG9ubHkgYWxsb3dlZFN0YXJ0RGF0ZSBpcyBzZXQgYW5kIGRhdGUgaXMgYWZ0ZXInLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYURhdGUgPSBMb2NhbERhdGUucGFyc2UoJzIwMTgtMDUtMTEnKVxyXG4gICAgICAgIGNvbmYuYWxsb3dlZFN0YXJ0RGF0ZSA9IGFEYXRlLm1pbnVzRGF5cygzKVxyXG4gICAgICAgIGV4cGVjdChpc1NlbGVjdGFibGUoYURhdGUsIGNvbmYpKS50b0JlKHRydWUpXHJcbiAgICB9KVxyXG5cclxuICAgIHRlc3QoJ3Nob3VsZCBiZSBpc1NlbGVjdGFibGUgPSB0cnVlLCBpZiBvbmx5IGFsbG93ZWRFbmREYXRlIGlzIHNldCBhbmQgZGF0ZSBpcyBiZWZvcmUnLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYURhdGUgPSBMb2NhbERhdGUucGFyc2UoJzIwMTgtMDUtMTEnKVxyXG4gICAgICAgIGNvbmYuYWxsb3dlZEVuZERhdGUgPSBhRGF0ZS5wbHVzRGF5cygyKVxyXG4gICAgICAgIGV4cGVjdChpc1NlbGVjdGFibGUoYURhdGUsIGNvbmYpKS50b0JlKHRydWUpXHJcbiAgICB9KVxyXG5cclxuICAgIHRlc3QoJ3Nob3VsZCBiZSBpc1NlbGVjdGFibGUgPSBmYWxzZSwgaWYgb25seSBhbGxvd2VkRW5kRGF0ZSBpcyBzZXQgYW5kIGRhdGUgaXMgYWZ0ZXInLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYURhdGUgPSBMb2NhbERhdGUucGFyc2UoJzIwMTgtMDUtMTEnKVxyXG4gICAgICAgIGNvbmYuYWxsb3dlZEVuZERhdGUgPSBhRGF0ZS5taW51c0RheXMoMilcclxuICAgICAgICBleHBlY3QoaXNTZWxlY3RhYmxlKGFEYXRlLCBjb25mKSkudG9CZShmYWxzZSlcclxuICAgIH0pXHJcblxyXG4gICAgdGVzdCgnc2hvdWxkIGJlIGlzU2VsZWN0YWJsZSA9IHRydWUsIGlmIGFsbG93ZWRFbmREYXRlICYgYWxsb3dlZFN0YXJ0RGF0ZSAmIGRhdGUgaXMgd2l0aGluJywgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGFEYXRlID0gTG9jYWxEYXRlLnBhcnNlKCcyMDE4LTA1LTExJylcclxuICAgICAgICBjb25mLmFsbG93ZWRFbmREYXRlID0gYURhdGUucGx1c0RheXMoMilcclxuICAgICAgICBjb25mLmFsbG93ZWRTdGFydERhdGUgPSBhRGF0ZS5taW51c0RheXMoMTApXHJcbiAgICAgICAgZXhwZWN0KGlzU2VsZWN0YWJsZShhRGF0ZSwgY29uZikpLnRvQmUodHJ1ZSlcclxuICAgIH0pXHJcblxyXG4gICAgdGVzdCgnc2hvdWxkIGJlIGlzU2VsZWN0YWJsZSA9IGZhbHNlLCBpZiBhbGxvd2VkRW5kRGF0ZSAmIGFsbG93ZWRTdGFydERhdGUgJiBkYXRlIGlzIG91dHNpZGUnLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYURhdGUgPSBMb2NhbERhdGUucGFyc2UoJzIwMTgtMDUtMTEnKVxyXG4gICAgICAgIGNvbmYuYWxsb3dlZEVuZERhdGUgPSBhRGF0ZS5taW51c0RheXMoMilcclxuICAgICAgICBjb25mLmFsbG93ZWRTdGFydERhdGUgPSBhRGF0ZS5taW51c0RheXMoMTApXHJcbiAgICAgICAgZXhwZWN0KGlzU2VsZWN0YWJsZShhRGF0ZSwgY29uZikpLnRvQmUoZmFsc2UpXHJcbiAgICB9KVxyXG59KVxyXG5cclxuZGVzY3JpYmUoJyNwb3B1bGF0ZU1vbnRoRGlzcGxheScsICgpID0+IHtcclxuICAgIGxldCBjb25mID0ge31cclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgIGNvbmYuZGlzcGxheURhdGUgPSBMb2NhbERhdGUucGFyc2UoJzIwMTgtMDUtMDEnKVxyXG4gICAgICAgIGNvbmYuc2VsZWN0ZWRTdGFydERhdGUgPSB1bmRlZmluZWRcclxuICAgICAgICBjb25mLnNlbGVjdGVkRW5kRGF0ZSA9IHVuZGVmaW5lZFxyXG4gICAgICAgIGNvbmYuYWxsb3dlZFN0YXJ0RGF0ZSA9IHVuZGVmaW5lZFxyXG4gICAgICAgIGNvbmYuYWxsb3dlZEVuZERhdGUgPSB1bmRlZmluZWRcclxuICAgIH0pXHJcblxyXG4gICAgYWZ0ZXJFYWNoKCgpID0+IHtcclxuICAgICAgICBjb25mID0ge31cclxuICAgIH0pXHJcblxyXG4gICAgdGVzdCgnbGFzdCBlbnRyeSBpbiBmaXJzdCBhcnJheSByZXR1cm5lZCBzaG91bGQgaGF2ZSBwcm9wZXJ0eSBcImluTW9udGg6IHRydWVcIicsICgpID0+IHtcclxuICAgICAgICBleHBlY3QocG9wdWxhdGVNb250aERpc3BsYXkoY29uZilbMF1bNl0uaW5Nb250aCkudG9CZSh0cnVlKVxyXG4gICAgfSlcclxuXHJcbiAgICB0ZXN0KCdlbnRyeSBpbiBhbGxvd2VkUmFuZ2Ugc2hvdWxkIGhhdmUgXCJ1bnNlbGVjdGFibGU6IGZhbHNlXCInLCAoKSA9PiB7XHJcbiAgICAgICAgY29uZi5hbGxvd2VkU3RhcnREYXRlID0gTG9jYWxEYXRlLnBhcnNlKCcyMDE3LTA1LTAxJylcclxuICAgICAgICBjb25mLmFsbG93ZWRFbmREYXRlID0gTG9jYWxEYXRlLnBhcnNlKCcyMDE4LTA1LTExJylcclxuICAgICAgICBleHBlY3QocG9wdWxhdGVNb250aERpc3BsYXkoY29uZilbMF1bMF0udW5zZWxlY3RhYmxlKS50b0JlKGZhbHNlKVxyXG4gICAgfSlcclxuXHJcbiAgICB0ZXN0KCdlbnRyeSBvdXRzaWRlIG9mIGFsbG93ZWRyYW5nZSBzaG91bGQgaGF2ZSBcInVuc2VsZWN0YWJsZTogdHJ1ZVwiJywgKCkgPT4ge1xyXG4gICAgICAgIGNvbmYuYWxsb3dlZFN0YXJ0RGF0ZSA9IExvY2FsRGF0ZS5wYXJzZSgnMjAxNy0wNS0wMScpXHJcbiAgICAgICAgY29uZi5hbGxvd2VkRW5kRGF0ZSA9IExvY2FsRGF0ZS5wYXJzZSgnMjAxNy0wNS0xMScpXHJcbiAgICAgICAgZXhwZWN0KHBvcHVsYXRlTW9udGhEaXNwbGF5KGNvbmYpWzBdWzBdLnVuc2VsZWN0YWJsZSkudG9CZSh0cnVlKVxyXG4gICAgfSlcclxuXHJcbiAgICBkZXNjcmliZSgnc2VsZWN0ZWRSYW5nZScsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgY29uZi5zZWxlY3RlZFN0YXJ0RGF0ZSA9IExvY2FsRGF0ZS5wYXJzZSgnMjAxOC0wNS0wMScpXHJcbiAgICAgICAgICAgIGNvbmYuc2VsZWN0ZWRFbmREYXRlID0gTG9jYWxEYXRlLnBhcnNlKCcyMDE4LTA1LTExJylcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRlc3QoJ2VudHJ5IGluIHNlbGVjdGVkcmFuZ2Ugc2hvdWxkIGhhdmUgXCJzZWxlY3RlZDogdHJ1ZVwiJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBleHBlY3QocG9wdWxhdGVNb250aERpc3BsYXkoY29uZilbMV1bMF0uc2VsZWN0ZWQpLnRvQmUodHJ1ZSlcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRlc3QoJ2VudHJ5IG91dHNpZGUgc2VsZWN0ZWRyYW5nZSBzaG91bGQgaGF2ZSBcInNlbGVjdGVkOiBmYWxzZVwiJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBlbmRPZlNlbGVjdGVkUmFuZ2UgPSBwb3B1bGF0ZU1vbnRoRGlzcGxheShjb25mKVsxXVs0XVxyXG4gICAgICAgICAgICBleHBlY3QoZW5kT2ZTZWxlY3RlZFJhbmdlLnNlbGVjdGVkKS50b0JlKHRydWUpXHJcbiAgICAgICAgICAgIGV4cGVjdChlbmRPZlNlbGVjdGVkUmFuZ2Uuc2VsZWN0ZWRFZGdlKS50b0JlKHRydWUpXHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn0pXHJcbiJdfQ==