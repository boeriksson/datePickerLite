919604c1b094480c480efbeebff1fec2
'use strict';

var _jsJoda = require('js-joda');

var _model = require('./model');

describe('#firstWeekDay', function () {
    test('should return a monday in same week if given a thursday', function () {
        var givenDay = _jsJoda.LocalDate.parse('2018-05-11');
        expect((0, _model.firstWeekDay)(givenDay).dayOfWeek().toString()).toBe('MONDAY');
    });
});

describe('#parseWeekFromDay1', function () {
    test('should return an array result of a supplied function', function () {
        var startDate = _jsJoda.LocalDate.parse('2018-05-07');
        var expectedResult = ['MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY', 'SATURDAY', 'SUNDAY'];
        var result = (0, _model.parseWeekFromDay1)(startDate)(function (date) {
            return date.dayOfWeek().toString();
        });
        expect(result).toEqual(expectedResult);
    });
});

describe('#isSelectable', function () {
    var conf = {};
    beforeEach(function () {
        conf.displayDate = _jsJoda.LocalDate.parse('2018-05-01');
        conf.selectedStartDate = undefined;
        conf.selectedEndDate = undefined;
        conf.allowedStartDate = undefined;
        conf.allowedEndDate = undefined;
    });
    afterEach(function () {
        conf = {};
    });

    test('should be selectable if no allowedRange set', function () {
        expect((0, _model.isSelectable)(_jsJoda.LocalDate.parse('2018-05-11'), conf)).toBe(true);
    });

    test('should be isSelectable = true, if only allowedStartDate is set', function () {
        var aDate = _jsJoda.LocalDate.parse('2018-05-11');
        conf.allowedStartDate = aDate;
        expect((0, _model.isSelectable)(aDate, conf)).toBe(true);
    });
});

describe('#populateMonthDisplay', function () {
    var conf = {};
    beforeEach(function () {
        conf.displayDate = _jsJoda.LocalDate.parse('2018-05-01');
        conf.selectedStartDate = undefined;
        conf.selectedEndDate = undefined;
        conf.allowedStartDate = undefined;
        conf.allowedEndDate = undefined;
    });

    afterEach(function () {
        conf = {};
    });

    test('last entry in first array returned should have property "inMonth: true"', function () {
        expect((0, _model.populateMonthDisplay)(conf)[0][6].inMonth).toBe(true);
    });

    test('entry in allowedRange should have "unselectable: false"', function () {
        conf.allowedStartDate = _jsJoda.LocalDate.parse('2017-05-01');
        conf.allowedEndDate = _jsJoda.LocalDate.parse('2018-05-11');
        expect((0, _model.populateMonthDisplay)(conf)[0][0].unselectable).toBe(false);
    });

    test('entry outside of allowedrange should have "unselectable: true"', function () {
        conf.allowedStartDate = _jsJoda.LocalDate.parse('2017-05-01');
        conf.allowedEndDate = _jsJoda.LocalDate.parse('2017-05-11');
        expect((0, _model.populateMonthDisplay)(conf)[0][0].unselectable).toBe(true);
    });

    describe('selectedRange', function () {
        beforeEach(function () {
            conf.selectedStartDate = _jsJoda.LocalDate.parse('2018-05-01');
            conf.selectedEndDate = _jsJoda.LocalDate.parse('2018-05-11');
        });
        test('entry in selectedrange should have "selected: true"', function () {
            expect((0, _model.populateMonthDisplay)(conf)[1][0].selected).toBe(true);
        });
        test('entry outside selectedrange should have "selected: false"', function () {
            var endOfSelectedRange = (0, _model.populateMonthDisplay)(conf)[1][4];
            expect(endOfSelectedRange.selected).toBe(true);
            expect(endOfSelectedRange.selectedEdge).toBe(true);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZGVsLnRlc3QuanMiXSwibmFtZXMiOlsiZGVzY3JpYmUiLCJ0ZXN0IiwiZ2l2ZW5EYXkiLCJwYXJzZSIsImV4cGVjdCIsImRheU9mV2VlayIsInRvU3RyaW5nIiwidG9CZSIsInN0YXJ0RGF0ZSIsImV4cGVjdGVkUmVzdWx0IiwicmVzdWx0IiwiZGF0ZSIsInRvRXF1YWwiLCJjb25mIiwiYmVmb3JlRWFjaCIsImRpc3BsYXlEYXRlIiwic2VsZWN0ZWRTdGFydERhdGUiLCJ1bmRlZmluZWQiLCJzZWxlY3RlZEVuZERhdGUiLCJhbGxvd2VkU3RhcnREYXRlIiwiYWxsb3dlZEVuZERhdGUiLCJhZnRlckVhY2giLCJhRGF0ZSIsImluTW9udGgiLCJ1bnNlbGVjdGFibGUiLCJzZWxlY3RlZCIsImVuZE9mU2VsZWN0ZWRSYW5nZSIsInNlbGVjdGVkRWRnZSJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7QUFFQTs7QUFRQUEsU0FBUyxlQUFULEVBQTBCLFlBQU07QUFDNUJDLFNBQUsseURBQUwsRUFBZ0UsWUFBTTtBQUNsRSxZQUFNQyxXQUFXLGtCQUFVQyxLQUFWLENBQWdCLFlBQWhCLENBQWpCO0FBQ0FDLGVBQU8seUJBQWFGLFFBQWIsRUFBdUJHLFNBQXZCLEdBQW1DQyxRQUFuQyxFQUFQLEVBQXNEQyxJQUF0RCxDQUEyRCxRQUEzRDtBQUNILEtBSEQ7QUFJSCxDQUxEOztBQU9BUCxTQUFTLG9CQUFULEVBQStCLFlBQU07QUFDakNDLFNBQUssc0RBQUwsRUFBNkQsWUFBTTtBQUMvRCxZQUFNTyxZQUFZLGtCQUFVTCxLQUFWLENBQWdCLFlBQWhCLENBQWxCO0FBQ0EsWUFBTU0saUJBQWlCLENBQUMsUUFBRCxFQUFVLFNBQVYsRUFBb0IsV0FBcEIsRUFBZ0MsVUFBaEMsRUFBMkMsUUFBM0MsRUFBb0QsVUFBcEQsRUFBK0QsUUFBL0QsQ0FBdkI7QUFDQSxZQUFNQyxTQUFTLDhCQUFrQkYsU0FBbEIsRUFBNkIsVUFBQ0csSUFBRDtBQUFBLG1CQUFVQSxLQUFLTixTQUFM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LFlBQU07QUFDOURHLG1CQUFPLGlDQUFxQlMsSUFBckIsRUFBMkIsQ0FBM0IsRUFBOEIsQ0FBOUIsRUFBaUNZLFFBQXhDLEVBQWtEbEIsSUFBbEQsQ0FBdUQsSUFBdkQ7QUFDSCxTQUZEO0FBR0FOLGFBQUssMkRBQUwsRUFBa0UsWUFBTTtBQUNwRSxnQkFBTXlCLHFCQUFxQixpQ0FBcUJiLElBQXJCLEVBQTJCLENBQTNCLEVBQThCLENBQTlCLENBQTNCO0FBQ0FULG1CQUFPc0IsbUJBQW1CRCxRQUExQixFQUFvQ2xCLElBQXBDLENBQXlDLElBQXpDO0FBQ0FILG1CQUFPc0IsbUJBQW1CQyxZQUExQixFQUF3Q3BCLElBQXhDLENBQTZDLElBQTdDO0FBQ0gsU0FKRDtBQUtILEtBYkQ7QUFjSCxDQTVDRCIsImZpbGUiOiJtb2RlbC50ZXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTG9jYWxEYXRlIH0gZnJvbSAnanMtam9kYSdcclxuXHJcbmltcG9ydCB7XHJcbiAgICBmaXJzdFdlZWtEYXksXHJcbiAgICBpc1NlbGVjdGFibGUsXHJcbiAgICBwYXJzZVdlZWtGcm9tRGF5MSxcclxuICAgIHBvcHVsYXRlTW9udGhEaXNwbGF5XHJcbn0gZnJvbSAnLi9tb2RlbCdcclxuXHJcblxyXG5kZXNjcmliZSgnI2ZpcnN0V2Vla0RheScsICgpID0+IHtcclxuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gYSBtb25kYXkgaW4gc2FtZSB3ZWVrIGlmIGdpdmVuIGEgdGh1cnNkYXknLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZ2l2ZW5EYXkgPSBMb2NhbERhdGUucGFyc2UoJzIwMTgtMDUtMTEnKVxyXG4gICAgICAgIGV4cGVjdChmaXJzdFdlZWtEYXkoZ2l2ZW5EYXkpLmRheU9mV2VlaygpLnRvU3RyaW5nKCkpLnRvQmUoJ01PTkRBWScpXHJcbiAgICB9KVxyXG59KVxyXG5cclxuZGVzY3JpYmUoJyNwYXJzZVdlZWtGcm9tRGF5MScsICgpID0+IHtcclxuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gYW4gYXJyYXkgcmVzdWx0IG9mIGEgc3VwcGxpZWQgZnVuY3Rpb24nLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgc3RhcnREYXRlID0gTG9jYWxEYXRlLnBhcnNlKCcyMDE4LTA1LTA3JylcclxuICAgICAgICBjb25zdCBleHBlY3RlZFJlc3VsdCA9IFsnTU9OREFZJywnVFVFU0RBWScsJ1dFRE5FU0RBWScsJ1RIVVJTREFZJywnRlJJREFZJywnU0FUVVJEQVknLCdTVU5EQVknXVxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlV2Vla0Zyb21EYXkxKHN0YXJ0RGF0ZSkoKGRhdGUpID0+IGRhdGUuZGF5T2ZXZWVrKCkudG9TdHJpbmcoKSlcclxuICAgICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKGV4cGVjdGVkUmVzdWx0KVxyXG4gICAgfSlcclxufSlcclxuXHJcbmRlc2NyaWJlKCcjaXNTZWxlY3RhYmxlJywgKCkgPT4ge1xyXG4gICAgbGV0IGNvbmYgPSB7fVxyXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgY29uZi5kaXNwbGF5RGF0ZSA9IExvY2FsRGF0ZS5wYXJzZSgnMjAxOC0wNS0wMScpXHJcbiAgICAgICAgY29uZi5zZWxlY3RlZFN0YXJ0RGF0ZSA9IHVuZGVmaW5lZFxyXG4gICAgICAgIGNvbmYuc2VsZWN0ZWRFbmREYXRlID0gdW5kZWZpbmVkXHJcbiAgICAgICAgY29uZi5hbGxvd2VkU3RhcnREYXRlID0gdW5kZWZpbmVkXHJcbiAgICAgICAgY29uZi5hbGxvd2VkRW5kRGF0ZSA9IHVuZGVmaW5lZFxyXG4gICAgfSlcclxuICAgIGFmdGVyRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgY29uZiA9IHt9XHJcbiAgICB9KVxyXG5cclxuICAgIHRlc3QoJ3Nob3VsZCBiZSBzZWxlY3RhYmxlIGlmIG5vIGFsbG93ZWRSYW5nZSBzZXQnLCAoKSA9PiB7XHJcbiAgICAgICAgZXhwZWN0KGlzU2VsZWN0YWJsZShMb2NhbERhdGUucGFyc2UoJzIwMTgtMDUtMTEnKSwgY29uZikpLnRvQmUodHJ1ZSlcclxuICAgIH0pXHJcblxyXG4gICAgdGVzdCgnc2hvdWxkIGJlIGlzU2VsZWN0YWJsZSA9IHRydWUsIGlmIG9ubHkgYWxsb3dlZFN0YXJ0RGF0ZSBpcyBzZXQnLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYURhdGUgPSBMb2NhbERhdGUucGFyc2UoJzIwMTgtMDUtMTEnKVxyXG4gICAgICAgIGNvbmYuYWxsb3dlZFN0YXJ0RGF0ZSA9IGFEYXRlXHJcbiAgICAgICAgZXhwZWN0KGlzU2VsZWN0YWJsZShhRGF0ZSwgY29uZikpLnRvQmUodHJ1ZSlcclxuICAgIH0pXHJcbn0pXHJcblxyXG5kZXNjcmliZSgnI3BvcHVsYXRlTW9udGhEaXNwbGF5JywgKCkgPT4ge1xyXG4gICAgbGV0IGNvbmYgPSB7fVxyXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgY29uZi5kaXNwbGF5RGF0ZSA9IExvY2FsRGF0ZS5wYXJzZSgnMjAxOC0wNS0wMScpXHJcbiAgICAgICAgY29uZi5zZWxlY3RlZFN0YXJ0RGF0ZSA9IHVuZGVmaW5lZFxyXG4gICAgICAgIGNvbmYuc2VsZWN0ZWRFbmREYXRlID0gdW5kZWZpbmVkXHJcbiAgICAgICAgY29uZi5hbGxvd2VkU3RhcnREYXRlID0gdW5kZWZpbmVkXHJcbiAgICAgICAgY29uZi5hbGxvd2VkRW5kRGF0ZSA9IHVuZGVmaW5lZFxyXG4gICAgfSlcclxuXHJcbiAgICBhZnRlckVhY2goKCkgPT4ge1xyXG4gICAgICAgIGNvbmYgPSB7fVxyXG4gICAgfSlcclxuXHJcbiAgICB0ZXN0KCdsYXN0IGVudHJ5IGluIGZpcnN0IGFycmF5IHJldHVybmVkIHNob3VsZCBoYXZlIHByb3BlcnR5IFwiaW5Nb250aDogdHJ1ZVwiJywgKCkgPT4ge1xyXG4gICAgICAgIGV4cGVjdChwb3B1bGF0ZU1vbnRoRGlzcGxheShjb25mKVswXVs2XS5pbk1vbnRoKS50b0JlKHRydWUpXHJcbiAgICB9KVxyXG5cclxuICAgIHRlc3QoJ2VudHJ5IGluIGFsbG93ZWRSYW5nZSBzaG91bGQgaGF2ZSBcInVuc2VsZWN0YWJsZTogZmFsc2VcIicsICgpID0+IHtcclxuICAgICAgICBjb25mLmFsbG93ZWRTdGFydERhdGUgPSBMb2NhbERhdGUucGFyc2UoJzIwMTctMDUtMDEnKVxyXG4gICAgICAgIGNvbmYuYWxsb3dlZEVuZERhdGUgPSBMb2NhbERhdGUucGFyc2UoJzIwMTgtMDUtMTEnKVxyXG4gICAgICAgIGV4cGVjdChwb3B1bGF0ZU1vbnRoRGlzcGxheShjb25mKVswXVswXS51bnNlbGVjdGFibGUpLnRvQmUoZmFsc2UpXHJcbiAgICB9KVxyXG5cclxuICAgIHRlc3QoJ2VudHJ5IG91dHNpZGUgb2YgYWxsb3dlZHJhbmdlIHNob3VsZCBoYXZlIFwidW5zZWxlY3RhYmxlOiB0cnVlXCInLCAoKSA9PiB7XHJcbiAgICAgICAgY29uZi5hbGxvd2VkU3RhcnREYXRlID0gTG9jYWxEYXRlLnBhcnNlKCcyMDE3LTA1LTAxJylcclxuICAgICAgICBjb25mLmFsbG93ZWRFbmREYXRlID0gTG9jYWxEYXRlLnBhcnNlKCcyMDE3LTA1LTExJylcclxuICAgICAgICBleHBlY3QocG9wdWxhdGVNb250aERpc3BsYXkoY29uZilbMF1bMF0udW5zZWxlY3RhYmxlKS50b0JlKHRydWUpXHJcbiAgICB9KVxyXG5cclxuICAgIGRlc2NyaWJlKCdzZWxlY3RlZFJhbmdlJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25mLnNlbGVjdGVkU3RhcnREYXRlID0gTG9jYWxEYXRlLnBhcnNlKCcyMDE4LTA1LTAxJylcclxuICAgICAgICAgICAgY29uZi5zZWxlY3RlZEVuZERhdGUgPSBMb2NhbERhdGUucGFyc2UoJzIwMTgtMDUtMTEnKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGVzdCgnZW50cnkgaW4gc2VsZWN0ZWRyYW5nZSBzaG91bGQgaGF2ZSBcInNlbGVjdGVkOiB0cnVlXCInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4cGVjdChwb3B1bGF0ZU1vbnRoRGlzcGxheShjb25mKVsxXVswXS5zZWxlY3RlZCkudG9CZSh0cnVlKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGVzdCgnZW50cnkgb3V0c2lkZSBzZWxlY3RlZHJhbmdlIHNob3VsZCBoYXZlIFwic2VsZWN0ZWQ6IGZhbHNlXCInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVuZE9mU2VsZWN0ZWRSYW5nZSA9IHBvcHVsYXRlTW9udGhEaXNwbGF5KGNvbmYpWzFdWzRdXHJcbiAgICAgICAgICAgIGV4cGVjdChlbmRPZlNlbGVjdGVkUmFuZ2Uuc2VsZWN0ZWQpLnRvQmUodHJ1ZSlcclxuICAgICAgICAgICAgZXhwZWN0KGVuZE9mU2VsZWN0ZWRSYW5nZS5zZWxlY3RlZEVkZ2UpLnRvQmUodHJ1ZSlcclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufSlcclxuIl19